# AWS SAM:
## Introduction:
AWS SAM is composed of two things: Template and CLI.

## Template:
Describes the functions, APIs, permissions, configurations, and events that make up a serverless application.

It's only a file, named 'template.yml' (can you believe it?).

It has a couple of arguments, in which only Transform and Resources are required, the others
are optional:
### Template tags:
-Transform: Put 'Transform: AWS::Serverless-2016-10-31' on the file. Just accept it.

-Globals: It contains information and configuration that is shared on the Function, API and SimpleTable tags.

-Resources: The actual functions, APIs ,(...), that make up the app.

-Description: Could you guess what this is?

-Metadata: Could you guess what this is?

-Parameters: Values that you can refer to on Resources and Outputs.

-Mappings: Like a lookup table.

-Conditions: Specify if some resources are used or not depending on some factors (e.g.: test environment).

-Outputs: Describes values.

### Example of template:
'Globals:
  Function:
    Runtime: nodejs6.10
    Timeout: 180
    Handler: index.handler
    Environment:
      Variables:
        TABLE_NAME: data-table

Resources:
  HelloWorldFunction:
    Type: AWS::Serverless::Function
    Properties:
      Environment:
        Variables:
          MESSAGE: "Hello From SAM"

  ThumbnailFunction:
    Type: AWS::Serverless::Function
    Properties:
      Events:
        Thumbnail:
          Type: Api
          Properties:
            Path: /thumbnail
            Method: POST'

### Resource and Property Reference:
#### AWS::Serverless::API
A collection of Amazon API Gateway resources and methods.
Docs: https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-resource-api.html.

#### AWS:Serverless::Application
A serverless application.
Docs: https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-resource-application.html.

#### Function:
A lambda function.
Docs: https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-resource-function.html.

#### HttpApi (in beta):
An API Gateway HTTP API.
Docs: https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-resource-httpapi.html.

#### LayerVersion:
A layer (that is, a ZIP archive that contains libraries, a custom runtime, or other dependencies, needed by Lambda Functions).
Docs: https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-resource-layerversion.html.

#### SimpleTable:
Creates a DynamoDB table with a single attribute primary key.
Docs:https://docs.aws.amazon.com/serverless-application-model/latest/developerguide/sam-resource-simpletable.html.

### Intrinsic Functions:
Built-in functions that enable you to assign values to properties that are only available at runtime.
Docs: https://docs.aws.amazon.com/AWSCloudFormation/latest/UserGuide/intrinsic-function-reference.html.

## CLI:
It's a command line tool that operates on an AWS SAM template and application code.

### Commands:
sam init – If you're a first-time AWS SAM CLI user, you can run the sam init command without any parameters to create a Hello World application. The command generates a preconfigured AWS SAM template and example application code in the language that you choose.

sam local invoke and sam local start-api – Use these commands to test your application code locally, before deploying it to the AWS Cloud.

sam logs – Use this command to fetch logs generated by your Lambda function. This can help you with testing and debugging your application after you've deployed it to the AWS Cloud.

sam package – Use this command to bundle your application code and dependencies into a "deployment package". The deployment package is needed to upload your application to the AWS Cloud.
e.g. ``` sam package
--template-file template.yml
--output-template-file package.yml
--s3-bucket bucketname  ```
sam deploy – Use this command to deploy your serverless application to the AWS Cloud. It creates the AWS resources and sets permissions and other configurations that are defined in the AWS SAM template.
e.g.: ``` sam deploy
--template-file package.yml
--stack-name stackname
--capabilities CAPABILITY_IAM ```

### Configuration:
#### Quick Example:
```
aws configure ** (optional: --profile profilename)
AWS Access Key ID [None]: ** you get this on  https://console.aws.amazon.com/iam/home?region=us-east-2#/security_credentials **
AWS Secret Access Key [None]: ** same **
Default region name [None]: ** the region where your requests go e.g. us-west-2 **
Default output format [None]: ** options: json(default), yaml, text or table **
```

When running any aws command, you can select the profile by putting --profile profilename on the end of it.

